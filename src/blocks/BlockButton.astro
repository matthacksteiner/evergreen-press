---
import { toRem } from '@lib/helpers.js';
import Link from '@components/Link.astro';
const {
	link,
	global,
	align,
	className,
	buttonLocal,
	buttonSettings,
	buttonColors,
	metadata,
} = Astro.props;
const buttonFont = buttonLocal ? buttonSettings.buttonfont : global.buttonFont;
const size = buttonLocal
	? buttonSettings.buttonfontsize
	: global.buttonFontSize;
const buttonPadding = buttonLocal
	? toRem(buttonSettings.buttonpadding)
	: toRem(global.buttonPadding);
const color = buttonLocal
	? buttonColors.buttontextcolor
	: global.buttonTextColor;
const colorActive = buttonLocal
	? buttonColors.buttontextcoloractive
	: global.buttonTextColorActive;
const buttonBorderColor = buttonLocal
	? buttonColors.buttonbordercolor
	: global.buttonBorderColor;
const bg = buttonLocal
	? buttonColors.buttonbackgroundcolor
	: global.buttonBackgroundColor;
const bgActive = buttonLocal
	? buttonColors.buttonbackgroundcoloractive
	: global.buttonBackgroundColorActive;
const buttonBorderColorActive = buttonLocal
	? buttonColors.buttonbordercoloractive
	: global.buttonBorderColorActive;
const buttonBorderWidth = buttonLocal
	? toRem(buttonSettings.buttonborderwidth)
	: toRem(global.buttonBorderWidth);
const buttonBorderRadius =
	link.title && link.title.length === 1
		? '50%'
		: buttonLocal
		? toRem(buttonSettings.buttonborderradius)
		: toRem(global.buttonBorderRadius);
---

<div
	id={metadata?.identifier || undefined}
	class:list={[
		'blockButton',
		'blocks',
		'flex',
		'flex-col',
		className,
		metadata?.classes,
	]}
	{...metadata?.attributes}
>
	<Link
		link={link}
		class:list={[
			'button',
			'inline-block',
			`font--${size}`,
			`buttonText--${color}`,
			`buttonTextActive--${colorActive}`,
			`buttonBg--${bg}`,
			`buttonBgActive--${bgActive}`,
			`buttonBorder--${buttonBorderColor}`,
			`buttonBorderActive--${buttonBorderColorActive}`,
			'transition-all',
			'duration-300',
			align === 'start' || align === 'normal'
				? 'mr-auto'
				: align === 'center'
				? 'mx-auto'
				: align === 'end' && 'ml-auto',
		]}
	/>
</div>

<style
	lang="css"
	is:global
	define:vars={{
		buttonFont,
		buttonPadding,
		buttonBorderRadius,
		buttonBorderWidth,
	}}
>
	.button {
		@apply rounded-[var(--buttonBorderRadius)] border-[length:var(--buttonBorderWidth)];
		padding: var(--buttonPadding) calc(var(--buttonPadding) * 2);
		font-family: var(--buttonFont);
	}

	.buttonText--primary {
		@apply text-primary;
	}

	.buttonText--secondary {
		@apply text-secondary;
	}

	.buttonText--tertiary {
		@apply text-tertiary;
	}
	.buttonText--black {
		@apply text-black;
	}
	.buttonText--white {
		@apply text-white;
	}
	.buttonText--transparent {
		@apply text-transparent;
	}
	.buttonText--primary {
		@apply hover:text-primary;
	}

	.buttonTextActive--secondary {
		@apply hover:text-secondary;
	}

	.buttonTextActive--tertiary {
		@apply hover:text-tertiary;
	}
	.buttonTextActive--black {
		@apply hover:text-black;
	}
	.buttonTextActive--white {
		@apply hover:text-white;
	}
	.buttonTextActive--transparent {
		@apply hover:text-transparent;
	}
	.buttonBg--primary {
		@apply bg-primary;
	}
	.buttonBg--secondary {
		@apply bg-secondary;
	}
	.buttonBg--tertiary {
		@apply bg-tertiary;
	}
	.buttonBg--black {
		@apply bg-black;
	}
	.buttonBg--white {
		@apply bg-white;
	}
	.buttonBg--transparent {
		@apply bg-transparent;
	}

	.buttonBgActive--primary {
		@apply hover:bg-primary;
	}

	.buttonBgActive--secondary {
		@apply hover:bg-secondary;
	}

	.buttonBgActive--tertiary {
		@apply hover:bg-tertiary;
	}

	.buttonBgActive--black {
		@apply hover:bg-black;
	}

	.buttonBgActive--white {
		@apply hover:bg-white;
	}

	.buttonBorder--primary {
		@apply border-primary;
	}
	.buttonBorder--secondary {
		@apply border-secondary;
	}
	.buttonBorder--tertiary {
		@apply border-tertiary;
	}
	.buttonBorder--black {
		@apply border-black;
	}
	.buttonBorder--white {
		@apply border-white;
	}
	.buttonBorder--transparent {
		@apply border-transparent;
	}

	.buttonBorderActive--primary {
		@apply hover:border-primary;
	}

	.buttonBorderActive--secondary {
		@apply hover:border-secondary;
	}

	.buttonBorderActive--tertiary {
		@apply hover:border-tertiary;
	}

	.buttonBorderActive--black {
		@apply hover:border-black;
	}

	.buttonBorderActive--white {
		@apply hover:border-white;
	}

	.buttonBorderActive--transparent {
		@apply hover:border-transparent;
	}
</style>
