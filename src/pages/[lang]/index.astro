---
const { lang } = Astro.params;
import { getData, getLanguageContext, type GlobalData } from '@lib/api';
import PageRenderer from '@components/PageRenderer.astro';

export async function getStaticPaths() {
	const { allLangs, prefixDefaultLocale, translations } =
		await getLanguageContext();

	// Determine which languages to generate paths for
	const languagesToGenerate = !prefixDefaultLocale
		? translations
		: allLangs.map((lang) => lang.code);

	return languagesToGenerate.map((langCode) => ({
		params: {
			lang: langCode,
		},
	}));
}

const currentLang = lang;
const global = await getData<GlobalData>(`/${currentLang}/global.json`);
---

<PageRenderer slug="home" lang={currentLang} global={global} />
