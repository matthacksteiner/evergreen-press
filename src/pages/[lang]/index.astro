---
const { lang } = Astro.params;
import {
	getData,
	getLanguages,
	getGlobal,
	getAllPages,
	type GlobalData,
} from '@lib/api';
import PageRenderer from '@components/PageRenderer.astro';

export async function getStaticPaths() {
	const API_URL = import.meta.env.KIRBY_URL;
	const global = await getGlobal();
	const prefixDefaultLocale = global.prefixDefaultLocale;
	const languages = await getLanguages();
	const allLang = !prefixDefaultLocale
		? languages.translations.map((lang: any) => lang.code)
		: languages.allLang.map((lang: any) => lang.code);

	return allLang.map((lang) => ({
		params: {
			lang,
		},
	}));
}
const currentLang = lang;
const global = await getData<GlobalData>(`/${currentLang}/global.json`);
---

<PageRenderer slug="home" lang={currentLang} global={global} />
