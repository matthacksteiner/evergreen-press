---
const isNetlifyDev = process.env.NETLIFY_DEV === 'true';
const baseUrl = isNetlifyDev
	? 'http://localhost:8888'
	: 'https://baukasten.netlify.app';

const { src, ...props } = Astro.props;
const ratioDesktop = eval(props.ratioDesktop);
const ratioMobile = eval(props.ratioMobile);

const imageWidthDesktop = 1840;
const imageHeightDesktop = Math.round(imageWidthDesktop / ratioDesktop);
interface Props {
	src: string;
	width: string;
	height: string;
	alt: string;
	ratioMobile: string;
	ratioDesktop: string;
}
---

<img
	src={`${baseUrl}/.netlify/images?url=${src}&w=${imageWidthDesktop}&h=${imageHeightDesktop}&fit=cover&fm=webp`}
	loading="lazy"
	{...props}
/>
