---
import Picture from '@components/Picture.astro';
const {
	image,
	ratioDesktop,
	ratioMobile,
	loading,
	class: className,
} = Astro.props;

const aspectMobile = ratioMobile.replace('/', ':');
const aspectDesktop = ratioDesktop.replace('/', ':');

const focusX = image.focusX;
const focusY = image.focusY;

let position = '';

position += focusX < 33 ? 'left' : focusX > 66 ? 'right' : '';
position +=
	focusY < 33
		? position
			? ' top'
			: 'top'
		: focusY > 66
		? position
			? ' bottom'
			: 'bottom'
		: '';

if (!position.trim()) {
	position = 'center';
}
---

<Picture
	src={image.url}
	alt={image.alt}
	widths={[335, 335 * 2]}
	position={position}
	positionPreview={`${focusX}%  ${focusY}%`}
	aspectRatio={aspectMobile}
	class={`${className} lg:hidden w-full object-cover`}
	loading={loading}
/>
<Picture
	src={image.url}
	alt={image.alt}
	widths={[430, 900, 1824]}
	aspectRatio={aspectDesktop}
	position={position}
	positionPreview={`${focusX}%  ${focusY}%`}
	class={`${className} hidden lg:block w-full object-cover`}
	loading={loading}
/>
