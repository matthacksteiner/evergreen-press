[build]
command = "astro build"
base = "/"
publish = "dist"

# Register the astro-kirby-sync as a Netlify Build Plugin
[[plugins]]
package = "./plugins/astro-kirby-sync"

[build.processing.html]
pretty_urls = true

[build.environment]
NODE_VERSION = "23"

[images]
remote_images = [ "https://cms.baukasten.matthiashacksteiner.net/media/.*" ]

# Handle preview URL without trailing slash - redirect to trailing slash version
[[redirects]]
from = "/preview"
to = "/preview/"
status = 301

[dev]
  autoLaunch = false